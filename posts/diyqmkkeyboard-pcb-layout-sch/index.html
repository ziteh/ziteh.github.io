<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/uploads/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/uploads/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Sans+TC:300,300italic,400,400italic,700,700italic%7CFira+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ziteh.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":true,"nav":{"disqus":{"text":"Load Disqus","order":-1}},"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="到上一篇文章爲止我們已經完成了鍵盤的韌體部分，接下來要進行硬體的部分。本篇要介紹的是製作步驟的第 5 步——繪製 PCB。 我將示範以 KiCad 7 進行機械式鍵盤的 PCB Layout，包含基本的 KiCad 使用教學。要畫 PCB 可能多少需要一些基本電學或基礎電路學知識，但是如果你真的沒學過的話也沒關係，仔細照著本文應該也不會出錯。">
<meta property="og:type" content="article">
<meta property="og:title" content="[自製QMK鍵盤-5] KiCAD鍵盤PCB繪製教學 (上)">
<meta property="og:url" content="https://ziteh.github.io/posts/diyqmkkeyboard-pcb-layout-sch/index.html">
<meta property="og:site_name" content="ZiTe 本物志">
<meta property="og:description" content="到上一篇文章爲止我們已經完成了鍵盤的韌體部分，接下來要進行硬體的部分。本篇要介紹的是製作步驟的第 5 步——繪製 PCB。 我將示範以 KiCad 7 進行機械式鍵盤的 PCB Layout，包含基本的 KiCad 使用教學。要畫 PCB 可能多少需要一些基本電學或基礎電路學知識，但是如果你真的沒學過的話也沒關係，仔細照著本文應該也不會出錯。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6f33nsFQt0034iy9rPNKpGa-CDNIwb4PQo5pJVjrq7vfzv0-EG2U5ezd0RDt1KUggojOaU6yKHeOVfusjAwgGjbgmsm37kvwAdrj32qLdWxlCDL6y_I3_tg9dlD1xrUg8HzNUHzae32V6Wct1cE_6inY2DP-ztdDCRunIy3pH0lY_PfZo2c90j7KL/s16000/auto-pro.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQO1IDJhrfPwzxngBGlAll5epAX7wwqyxB9s2Yn4pYRQAXT1yb1AHYTnHCTUT3Pr-AeJKvgv5o_kvFylZLASi1mV0RtrrlHX1UpEg_I_KjeQNNxQMNh6cFMVxJNuHKKHtXKYqjOHzbd4ms9VmB2ZU-cf8ImEoxGzS1bCisXi-zKr1hKqy6FP5qQyB1/s16000/auto-sch-1.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjDs57r0P5KuqEnKYacpdejxTiyw20_zHDdrL7to4rFYjQZO28qd9VTpFs6BSRA9r23DJ-4-aFXyGhEb29wDdVmYF5Mmc94xITawBGiscwmwo-a4I69JthKyYnCMyyDdH8WaD_td__TzRtBHuMwuYuyNFTNrYczFiDnK49tBtHoW3MGG6uW36T9Xncy/s16000/auto-layer-1.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCJHt3BFDyYtQA_m3O7Zmh8YXfDY-UQnmJW3pqnoXJe9EMpw0B4m-n9k0UVcVkk_gbOBwepEygpyxD1TrRGWYA_gzHDKY5LFX7WBzp-UQzzQ8he_s82i-VHbcyl8JETN4kdHxjmmWbQmQhDpo3EF8VuhBY-DGD64E-Q-ZcktxTgE8sla-eSpQslZzI/s16000/kicad-new-project.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhQl-gVTMGssXj-MS6nEnDMsaqTa3L6WKrm4Af6SqXc889ZmKZHX5FXk0eF0HjAREZ2dEAPumqgNn2opUSJfTzwajZbko1Qo7W2Hqu7kcuwViHeYl2wZtXqcMUB71gM6_8ffDLLq4bKkGGGUaR1Hc5rL-Df0IrW8s_8gn3h86AKq-cBsPw1Wu1aUKCO/s16000/kicad-new-project-path.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTXl3xKteDvpQCF2l_7ZGQ8jOHqVFqeFzzZuA4ktyaSKSOU6JugiBoGXdwB_Xnft5pkqNV6K9-HQS0P8on0CMJD_58pQyH5ac2LHbRJFxq1QV5e3vEMtdmb-bSp9kKq6bQ7yBeJSxeKTL8FeqJW44dqrVIt3w8XPYIfanqteQ2mDiMnFibhNN6FVnC/s16000/kicad-project-overview.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrUe8pueoiShS4VwATcXwk7kRQXP28RwXFmD37E_3AK7zLT4OH84IMdQU_qQSFXkDxMavFTo5WfGRcgb9yIdORsA7XLTA5Yv1tvlie6wpoN-d-7mAJ3CK28OCfMGM8_oI7Xi4OkZ8KgJNoT_xNVsbobPQpjMPIJ-KkgWKXPeVlpbCMnPXGBU64FXV6/s16000/PCM.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhYluZZe-b_2p8iOgo5Cvuq6Z9w5GQV1Go_TTBxwO9y4ez_eT9GSui2ylGi-4jhwtvMyAHLA93ptdq9ISJDKP5kv5ou7tzAhCi9kLwqnUvPubazJ0-BIr5BMVpJv1nFEW0oK_WyQTMPj6R_Bkmdu2--RXmp1yRMFcndTgUWh3IgLswKB3GC7APgGyDf/s16000/pertty.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUBSDN4vIVVSVpIrhMM6qxHf8W0Eo6oGkjVVToL8muzQ-52W9HgtxNB3gZNpBC7l0fyYakom80bhZBN3CMXU8EicBLRqh8Hhm6yOBY0zfP1-rhK2YO28cFEfCplY_WrUWlHmU3OUPG2-dOIKeY8OEwYlVPfzIRiINDpexeXgs0LZojO31MWP2njQfz/s16000/sch-empty.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi-y4sWQTuxyPlHzWYqsyWbX8KYka7qUZwzhK3yqhwKsHUCt-wk-fiKrDU582kkFQ6REkua0NYsYx8St6UgDlbfPIKdzCH4-aRvEbD9dtEz-w4-N4Kbbx5UFaRVs2bA7jO3dgAk5h59pYoZubnudQwsZfqoGDXmSaT-3ji6YABHwhaNzUVeP_BdTVoQ/w253-h320/sch-add-symbol.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhuE8OZzNE5ub-dElZ_mKzNNrnxMGIat0CfM42KKHzCHYM8DvIU-CfdDdLs0edV1Avt8L4Spjjk50NYanz8QnreZVEY-dDN35jZvzsk9qDi0qT68CJaZi4gDp7tuep6dQOqs5DuwmDlxG4TyD89cHa9Yowow_-Wm-QzjHPkqN1KkuCUTxI8bT0ena9z/s16000/sch-symbol-choose.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXICAV-tpFs_UXIRABbyXMN31oro-62sozsOC9CmSycmgiDDJ_cvXNlhPsdmRbGEgcKO51lH_qfTvjEaD9ucFzFR1cFEEBw-ucskOWdAfT9l8VBnYF0SuPgDwbvzBg-2HzGFArSKoVtJEBN7sRssx9EvueDkdSXb3AIrHFRfDsUAxRkRfIDao8pvGd/s16000/sch-wire.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRFzFyr8iuNc5jVk8t_l3IoxUUFtvwnk392R4Tm758aJfYhkJTYb8SYYyjkmArA_vLHGGU16KqwTyGg_NSc3o9r5l3ixXknU_SrydgRedc5w_p2Pz_ce2esNIJ7aOiyNveInZkdPQW0SR2FOHXnoSclWdkgcYkZD_0Gvwdy6oNIHIxR2qnbQeTOBsG/s16000/sch-add-hierarchical-sheet.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhWPOlxWil726eynU3e5KddoNV1NdpsrpjHfA0VDFrd6jx8Z7AvB5wj7DvDaNx4w2iuqzIs1sbB5uiCgAe6ZDdxt_HqwR9RghgmTgecGen8BMtmVV4o6ROKpCCLR_0JzOSl_w5FPUeJJizJO4i6AqHDLWRI5taAsI3x0L3-OIG4sosJ4wgFjVi-wEar/s16000/sch-hierarchical-sheet-name.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1bGF8PQQNGApgEIkDOkeTXLrdcC8mxZ4uGNAzVplSn9fCBltVw2GxDcnRSeElgKWUshjXtNyqCGb78YHjY2Zb9f3zyEoWkidkTXwog1PnWtF_npVhgkNI7Wlm6sVfHf6DuHacSS668gpyUV24ZQHbTw6FNpcB8VDRTt3-JibDpkkF-ATN9DbpTieQ/s16000/sch-add-global%20label.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiFFfazVfv28XmOf69Rapnop9P6vpB3P4h7NvJfjmxXrlH_mB7QGpg2u1Qc64WCefdf1i58rtZNCvQ6ba6xZphL-Lz-VAXyJX5zUD-rdz_XKP8MTL4qKgjqrRrUPfvdvDdxgbFb1ZBS16v3eDpkn_OeolKog0XAqUTPWOkmp4URju0IvQCgl76y1ezz/s16000/sch-bom-edit.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhoCrzMXn_9_tKBotsgHycppvmi1FFeRlA_J78tqmhogQbyNk6Kx0MVdNzAVpiMEpwlm7MepJ4mhNJ3wbxuhUb9S0NS_deArZEmcpYMGCiarBWo1nOKqL8jB53mshM7_mYj8NhfSOLSHAt7kCGcL4penHgTrpa1gGVNj-DbaIQYtzCNf-UFkfl9lzgY/s16000/sch-bom-edit-footprint.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjgvIHRSRcwEE2XYdea3Po6E-VpXZyKytA4y855pHioiGVmdC5AOJcm5iG6gQ6dy1JYi3HJCJM9jJtHDJcIWPraROaC_EAp0nWNqJCOVF5zyynKF0OuTk9zSeMFGD-fmFOzrPPPfWGEpNW3MDbDYHsQzYDjadGgH_DgbA8qf13TuswFQvyv9BqwaJ1b/s16000/sch-footprint-as.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9ox8uie8cK99P7-Bh4J-L3JAF1tjoX4h27ZM9vs64lVEkFYQ7BfkWR7eJEd1-JX2q4aons3v14yiU3O2gRpCYA9YLLxrQEEqLC25dnE8nYALdbjwNF6sq43djmQxvrKfIdrscjdU_4w2SW0Q60s3xSycRbWzdw3W-6-qhXMeJb-in21-K2nuoQzTP/s16000/sch-ref-1.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2D3I_ShbIWDJxDQEVcnQdX8QPBovSH4F5FfOHxl_wN2d-sm9IjEw9r5kmD1P0Sk8F7hTjJeSvcHyCAgU-dRQ525kuws6IZi_hgU8LJ2rCkeV1ahqmbdinO_WS87FHjJdncZEuucT3_3V_ZjXeXC-4Mg1Fi6eWGYyv1kags31J1B306eLMW4zoh7pf/s16000/sch-ref-2.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjAa35I5IbRaoNKn_kVqRN5cdSyDXW1fOY-Llr_JWbS8qoP4_JXBA2XCx_juLtAQKCJqHXOI3xCVekfj4s0iMw6V-qwaRTEKlNob1teo50B_fOST1FZ-LF3VVqU855RnTAmAis9LG-ple6c-yPfwXN4N-YNN3a-MqJVfDLvo59bLJRewfYiTVUeDxzf/s16000/sch-lcsc.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQHk-tCHUI6E6gXu6u-VKa2m73Hhxq5VxTAe1ewnlxTPhDSUmSp7vA4eJfMjOWgCRYWsH1JEh9_NkIayxTYUaeRYDF0ounPrMbxwjBKLtPxCumCbl-ybjw-h9CVOoKR605GbaC82WvKPapV2AO9hAbMaDvcRY-rfBGMzhtUpUGIKdhaXdFv1bM180M/s16000/page-settings.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjfmopmM-RL6jfbbgw69xQqYMHaqXemSIyNDt9fsk5BRSbz6Bo844xybKd_1XBD4oQxDIxosfo7WewDHWx_50HpoWvnpmDKwkn_m3-0QYeXahDOHiVpsYgD_kGDXFjVHyp5k31uDT60IQr9hnZbXw-TmgNOZ4U6-Ceno6yzMqmdLpemVzEq7KWqOu5F/s16000/promicro-pinout.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiOa15_1bCowe-jw0sThBPhy1HKScNgCSbzM3Pxdl9vqlK10vSq9YBykJv--pfhGIpbawNpbnGhVBqjv8qwNtpzC2SaoPjerYeD-jfdd7RDjZ42Pz4lN4vLNBNFihTzb15NSlloZRyQGdfuGW89w_J_8gepngKL9WbOiNxVQ5fHtBLUPrp2yk5_4Q2K/s16000/sch-new-key-matirx-subsheet.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg8v9h0Om1GTdYqD9sTwAUerfyor_2Qjmf186kaPqZlJgYdq5flloVI7VJSfuZpWoyEGwZ4oaDOXTN7BgVjdn8g3JbwDuTXf431wx51nQZjp21dY9Ng0PGOXRpAxFWYfSK5xd3W8EqPYB3MSXD6wginD8KYC9cKo0qzYX0lSrmWlH1Qij6ZvaAAdYMu/s16000/sch-add-symbol-sw.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_asgQ8nY5OPGCRKeyPjCosZ7TD-j20AkAmPebXzqSrJSs2yWGiltSe5EJEeUaj_GDJwoC0PaPeDdaGIvhWy69ndGpsWu8Mpj2b4kuTVvATgXPlEeQqBMzNAp_OSzGawbuOSwXxTP3b3D6LvAJTisidbvK-ff7mUjEa-fxxix4vX8lHyI6YuhgSegU/s16000/sch-key.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_ueLaVTGPaUM-MKQO7hDPP1pHJGXQ1mhv5XlmA8MBuWomK9TiAegrZqPXoeXnTjUgN20u7JVl8py9jgnJKyMlDxrFR_eTemduMBZesMK7hPURS9nQKfvcTRcDkWgFTBBHTaFHN5u1CYJ4etpJNOOSU_ue9EjbvftfKFGVRwPNf1vZypMso1tCJkbZ/s16000/Screenshot%202023-05-08%20at%2023-49-58%20ziteh_key-switches.pretty%20Mechanical%20keyboard%20switches%20KiCad%20footprint%20library.png">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi1nX3B16ELDFBNmCfU-nhakYzWRgHuNfjPL47O7jNpxfDgYQF35S6H06sZuaJFUb9qnvt344otZXIK0knjz3bsPPm95YVzR5V6GHvffNSCfedHokXP7vbNDVxXEfW9wga7cv3dJoNf1VePxWZNjEPn0A88UDzcYvbXiaiE7JVglxpcJJX25v3KM7aW/s16000/sch-sw-diode-pair.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvak73OBN9QiLxWjWHknS3o454zC9i_1FPCQrOqcD3flJPXkT7NPfViKjgasolo7vkPGOR_V0s0CvLTYUN8X3I1jTOvlbOpc3e_eCqS7Pvu4n1Apiy9gltgQdkvCs0GPtemJ_JOPAl2UDpB4j-5D2fKnmlAjn81bCQr8-rgJ_-exg3FPjl74P8KPui/s16000/sch-key-matrix-1.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0yIr0fJaCqQXdnN5sLqaSHp7yrnsp2DpACNsbB5bWvw2yxGaoMwlI6pRKm-cN7Mi8dhO8CpSACS8315D6F3MHnIu-J_CF43cYgwdxGqdbBCp3S2WrZlarglVmYfdvCHDF9_tZ2EUCrU6syHDYVIsZRnsNIZadke1yowF-ptN_-qcTI1WASjwTn4mf/s16000/Inkedsch-key-matrix-2A.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibQMCqA8P9g-6L1yjVyQjpXe17q4b24mt09T21KwoxkGSQSI7jKxeyYdoGEoWXH4qBQM8wPXwxkRkRGPJkLveWiLUpl0UmHyPUaSRajFD6gtsop1XMS-_pT3hjKReJwf0Fjd7ckvRZYgcy_gcY2G0gGoqrzwMz-Uayo9DhfdA7I5NuE4n5HJu9hY6D/s16000/sch-ldo.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhJM_J0Z0Kzsyjg__YCZnkPv66rpjZSp1xVemqBQuni34aV1FKMAwq76eRCPQHAXyvfAJsbCutUEKIlbkFdIia1X0skNpbhhrHmrtr1SaZY0b0rE3ZOMhFupSVX5_H0RuqPdZJb5hVRNcN6D6R3U56wWoewXB5-cv_-ebZP6NwypcC4p5eArjQymb7j/s16000/sch-symbol-usb-c.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiHLtaF4GyRFYABUeV7Lrp9TkK2KQ2B8J3pV37GB6KVS9P74TzhlSNQOyP9wdEpzRpbUEgTvRHzgtReCEMpbqDn55Bm1CaTV-k5ct0UMZ4-IXIRYx844f9vdGVoJXqCoFvfkBJpR8H15A8_nhQ3yp_-05xi2nIT2C87HwLXlEZ3t5uk2ewUfbhbE01Y/s16000/sch-usb.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjTWnrMxbb3OhXV3AmrvfdE6-ATnIpOahS6IA4Z6Qc0obPg0IWltLi7x_7CmnjWuVApdjapocij70tICZA9XR8pk8lsgaAqdA_Kj6EpTCYZEKGpu3zM46eY1nTVaUG3AHOpYQ9OZT7KWT9SA8D_M5is_flhY8YkcXulJhPMTt7KooCjqBn13S3cQTj_/s16000/test-keyboard-mcu-1.jpg">
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg3XzabwSjq-KAEzUmmSC4x53fjTbuW_VyYEszuvdTVic2TeX3xfCLH5XgMYSbFyLQu1AOwF4lFXwNtlRldWg47vdwGMbD8JjdEifWwZPgKejKLIHad_opy-VxdkLk7cO6C2Ik2hcsPfCVlxgjShO_ABkc-o9qw1PFP_BpT8Y4AuDAsTFo9Ha5RlZYK/s16000/sch-testpotin.jpg">
<meta property="article:published_time" content="2023-04-27T06:17:00.000Z">
<meta property="article:modified_time" content="2024-06-22T08:56:19.877Z">
<meta property="article:author" content="ZiTe">
<meta property="article:tag" content="DIY">
<meta property="article:tag" content="教學">
<meta property="article:tag" content="QMK">
<meta property="article:tag" content="3C">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6f33nsFQt0034iy9rPNKpGa-CDNIwb4PQo5pJVjrq7vfzv0-EG2U5ezd0RDt1KUggojOaU6yKHeOVfusjAwgGjbgmsm37kvwAdrj32qLdWxlCDL6y_I3_tg9dlD1xrUg8HzNUHzae32V6Wct1cE_6inY2DP-ztdDCRunIy3pH0lY_PfZo2c90j7KL/s16000/auto-pro.jpg">


<link rel="canonical" href="https://ziteh.github.io/posts/diyqmkkeyboard-pcb-layout-sch/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-TW","comments":true,"permalink":"https://ziteh.github.io/posts/diyqmkkeyboard-pcb-layout-sch/","path":"posts/diyqmkkeyboard-pcb-layout-sch/","title":"[自製QMK鍵盤-5] KiCAD鍵盤PCB繪製教學 (上)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>[自製QMK鍵盤-5] KiCAD鍵盤PCB繪製教學 (上) | ZiTe 本物志</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ZiTe 本物志</p>
      <i class="logo-line"></i>
      <p class="site-subtitle" itemprop="description">一位慢步於程式、電路與文學之人的學習記錄與分享</p>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜尋" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-folder-open fa-fw"></i>分類</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%8D%B5%E7%9B%A4-pcb"><span class="nav-text">鍵盤 PCB</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pcb-%E7%B9%AA%E8%A3%BD%E6%B5%81%E7%A8%8B"><span class="nav-text">PCB 繪製流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%8B%95%E7%94%9F%E6%88%90%E9%8D%B5%E7%9B%A4-pcb"><span class="nav-text">自動生成鍵盤 PCB</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%9D-kicad"><span class="nav-text">安裝 KiCad</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#kicad-%E5%9F%BA%E7%A4%8E%E6%95%99%E5%AD%B8"><span class="nav-text">KiCad 基礎教學</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E5%B0%88%E6%A1%88"><span class="nav-text">建立專案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%9D-footprint-%E5%BA%AB"><span class="nav-text">安裝 Footprint 庫</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B7%A8%E8%BC%AF-schematic"><span class="nav-text">編輯 Schematic</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E5%85%83%E4%BB%B6%E7%AC%A6%E8%99%9F"><span class="nav-text">加入元件符號</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E9%A0%81%E9%9D%A2"><span class="nav-text">子頁面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%99%E7%B1%A4"><span class="nav-text">標籤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#footprint"><span class="nav-text">Footprint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E5%85%83%E4%BB%B6%E4%BB%A3%E8%99%9F"><span class="nav-text">更新元件代號</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%B6%E4%BB%B6%E5%9E%8B%E8%99%9F"><span class="nav-text">零件型號</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A0%81%E9%9D%A2%E8%B3%87%E8%A8%8A"><span class="nav-text">頁面資訊</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%96%8B%E5%A7%8B%E7%B9%AA%E8%A3%BD%E9%8D%B5%E7%9B%A4"><span class="nav-text">開始繪製鍵盤</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%96%8B%E7%99%BC%E6%9D%BF"><span class="nav-text">使用開發板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B9%AA%E8%A3%BD%E7%9F%A9%E9%99%A3%E6%8E%83%E6%8F%8F%E9%9B%BB%E8%B7%AF"><span class="nav-text">繪製矩陣掃描電路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B9%AA%E8%A3%BD%E9%9B%BB%E6%BA%90%E9%9B%BB%E8%B7%AF"><span class="nav-text">繪製電源電路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B9%AA%E8%A3%BD-usb"><span class="nav-text">繪製 USB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B9%AA%E8%A3%BD%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E9%9B%BB%E8%B7%AF"><span class="nav-text">繪製微控制器電路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E5%85%83%E4%BB%B6"><span class="nav-text">其它元件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%88%90"><span class="nav-text">完成</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git"><span class="nav-text">Git</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E9%97%9C%E7%B6%B2%E9%A0%81"><span class="nav-text">相關網頁</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a href="/about/" title="About">
      <img class="site-author-image" itemprop="image" alt="ZiTe"
        src="/uploads/avatar.png">
    <p class="site-author-name" itemprop="name">ZiTe</p>
    <div class="site-description" itemprop="description"></div>
  </a>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ziteh" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ziteh" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.youtube.com/@siderakb" title="YouTube → https:&#x2F;&#x2F;www.youtube.com&#x2F;@siderakb" rel="noopener me" target="_blank"><i class="fab fa-youtube fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://siderakb.github.io/" title="SideraKB → https:&#x2F;&#x2F;siderakb.github.io&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-keyboard fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:honmonoh@gmail.com" title="E-Mail → mailto:honmonoh@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="回到頂端">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://ziteh.github.io/posts/diyqmkkeyboard-pcb-layout-sch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.png">
      <meta itemprop="name" content="ZiTe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZiTe 本物志">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="[自製QMK鍵盤-5] KiCAD鍵盤PCB繪製教學 (上) | ZiTe 本物志">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
          
          <div class="post-tags">
              <a href="/tags/DIY/" rel="tag"> DIY</a>
              <a href="/tags/%E6%95%99%E5%AD%B8/" rel="tag"> 教學</a>
              <a href="/tags/QMK/" rel="tag"> QMK</a>
              <a href="/tags/3C/" rel="tag"> 3C</a>
          </div>

        <h1 class="post-title" itemprop="name headline">
          [自製QMK鍵盤-5] KiCAD鍵盤PCB繪製教學 (上)
        </h1>
          <h3 class="post-subtitle">KiCAD PCB 電路板 Schematic 基礎教學
          </h3>


        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%87%AA%E8%A3%BDQMK%E9%8D%B5%E7%9B%A4/" itemprop="url" rel="index"><span itemprop="name">自製QMK鍵盤</span></a>
        </span>
    </span>
    <span class="post-meta-item">
      
      

      <time title="創建時間：2023-04-27 14:17:00" itemprop="dateCreated datePublished" datetime="2023-04-27T14:17:00+08:00">2023-04-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>到<a href="/posts/diyqmkkeyboard-3/">上一篇文章</a>爲止我們已經完成了鍵盤的韌體部分，接下來要進行硬體的部分。本篇要介紹的是<a href="/posts/diyqmkkeyboard-0/#%E8%A3%BD%E4%BD%9C%E6%AD%A5%E9%A9%9F">製作步驟</a>的第 5 步——繪製 PCB。</p>
<p>我將示範以 KiCad 7 進行機械式鍵盤的 PCB Layout，包含基本的 KiCad 使用教學。要畫 PCB 可能多少需要一些基本電學或基礎電路學知識，但是如果你真的沒學過的話也沒關係，仔細照著本文應該也不會出錯。</p>
<span id="more"></span>

<p>另有影片教學可以供參考：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DOluUYmqIs4?si=y68SmS6Z4g1ycMCW" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<blockquote>
<p>以下內容以 KiCad <code>v7.0.2</code> 作爲示範。</p>
</blockquote>
<!--more-->

<h1 id="鍵盤-pcb"><a href="#鍵盤-pcb" class="headerlink" title="鍵盤 PCB"></a>鍵盤 PCB</h1><p>一個鍵盤的 PCB 上基本會有這些部分：</p>
<ul>
<li>鍵盤矩陣掃描電路</li>
<li>微控制器電路</li>
<li>電源供應電路</li>
<li>USB</li>
</ul>
<p>其中較複雜的是微控制器電路與 USB 的部分，微控制器週邊會有許多外圍電路（如去藕電容），且腳位小又密集，較難佈線；而 USB 訊號是差分訊號，佈線時需要注意符合差分對設計與阻抗控制（阻抗匹配）。</p>
<p>還好市面上有許多開發板（如 Pro Micro），這些開發板通常都已經把電源供應、微控制器與 USB 電路都做好了，所以我們可以只要設計鍵盤矩陣掃描電路即可。</p>
<h1 id="pcb-繪製流程"><a href="#pcb-繪製流程" class="headerlink" title="PCB 繪製流程"></a>PCB 繪製流程</h1><p>使用 KiCad 進行 PCB Layout 通常會遵循以下流程：</p>
<ol>
<li>建立專案</li>
<li>編輯 Schematic 電路圖（原理圖）<ul>
<li>擺放所需的零件，並接線</li>
<li>指定各零件的數值（如電阻阻值）</li>
<li>指定各零件的 Footprint</li>
</ul>
</li>
<li>編輯 PCB<ul>
<li>將各零件擺放到實際的位置</li>
<li>佈線</li>
<li>繪製 PCB 外框邊緣</li>
</ul>
</li>
<li>進行 Design rule check（DRC）</li>
<li>輸出生產所需的檔案（Gerber 檔）</li>
</ol>
<blockquote>
<p><em>Footprint</em> 指的是一個電子元件物理上的實際樣子，包含了 Pin 腳的數量、位置及大小等。例如同樣是機械鍵軸，有分 Cherry MX、Alps、Kailh Choc 等不同的樣式，或是電阻有 THT 分插板型或 SMD 表面黏貼型的，而 SMD 型又會根據尺寸分爲 0805、0603、0402…等。<br>不同 Footprint 的 Pin 腳位置（焊孔或焊盤）及大小不同，用錯 Footprint 的話到時候零件可是沒辦法裝上去的。</p>
</blockquote>
<h1 id="自動生成鍵盤-pcb"><a href="#自動生成鍵盤-pcb" class="headerlink" title="自動生成鍵盤 PCB"></a>自動生成鍵盤 PCB</h1><p><a target="_blank" rel="noopener" href="https://kb.xyz.is/">Keyboard PCB Builder</a> 是一個自動工具，只要複製貼上 Keyboard Layout Editor 的 <a href="/posts/diyqmkkeyboard-1/">raw data</a>，就可以幫你生成基本的 KiCad 專案。</p>
<p>將下載的 <code>.zip</code> 檔解壓縮，使用 KiCad 開啓 <code>keyboard.pro</code> 即可開啓專案。自動生成的專案檔包含了已經畫好鍵盤矩陣的 Schematic、擺好位置的 PCB 設計及各種鍵軸的 Footprint 庫。微控制器與其它部分還是必須要自己手動繪製。</p>
<p>本文不使用其自動生成的專案，這裡僅做簡單的介紹。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6f33nsFQt0034iy9rPNKpGa-CDNIwb4PQo5pJVjrq7vfzv0-EG2U5ezd0RDt1KUggojOaU6yKHeOVfusjAwgGjbgmsm37kvwAdrj32qLdWxlCDL6y_I3_tg9dlD1xrUg8HzNUHzae32V6Wct1cE_6inY2DP-ztdDCRunIy3pH0lY_PfZo2c90j7KL/s16000/auto-pro.jpg" alt="自動生成的專案內容"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQO1IDJhrfPwzxngBGlAll5epAX7wwqyxB9s2Yn4pYRQAXT1yb1AHYTnHCTUT3Pr-AeJKvgv5o_kvFylZLASi1mV0RtrrlHX1UpEg_I_KjeQNNxQMNh6cFMVxJNuHKKHtXKYqjOHzbd4ms9VmB2ZU-cf8ImEoxGzS1bCisXi-zKr1hKqy6FP5qQyB1/s16000/auto-sch-1.jpg" alt="自動生成的 Schematic 電路圖，有鍵矩陣電路"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjDs57r0P5KuqEnKYacpdejxTiyw20_zHDdrL7to4rFYjQZO28qd9VTpFs6BSRA9r23DJ-4-aFXyGhEb29wDdVmYF5Mmc94xITawBGiscwmwo-a4I69JthKyYnCMyyDdH8WaD_td__TzRtBHuMwuYuyNFTNrYczFiDnK49tBtHoW3MGG6uW36T9Xncy/s16000/auto-layer-1.jpg" alt="自動生成的 PCB 設計，已經擺好按鍵位置"></p>
<h1 id="安裝-kicad"><a href="#安裝-kicad" class="headerlink" title="安裝 KiCad"></a>安裝 KiCad</h1><p>我喜歡用的 PCB Layout 工具是 <a target="_blank" rel="noopener" href="https://www.kicad.org/">KiCad EDA</a>，這是一款開源且跨平臺的 PCB 繪製軟體，算是現今開源界最熱門、社群最龐大的一個。有很多開源的鍵盤或其它電路專案都使用 KiCad。在<a target="_blank" rel="noopener" href="https://www.kicad.org/download/">此頁面</a>下載 KiCad。</p>
<p>目前最新的版本是 <code>7.0.2</code>，但是 <code>7.x.x</code> 是最近才更新的，可能有些插件還沒更新並支援新版，如果有這種情況的話建議先使用 <code>6.0.8</code> 版。本文是以 <code>7.0.2</code> 做示範。</p>
<blockquote>
<p>要用較舊版本的 KiCad <code>6.0.8</code> 可以到<a target="_blank" rel="noopener" href="https://downloads.kicad.org/kicad/windows/explore/stable">這個頁面</a>或 <a target="_blank" rel="noopener" href="https://github.com/KiCad/kicad-source-mirror/releases/tag/6.0.8">GitHub</a> 中，下載 <code> kicad-6.0.8-x86_64.exe</code>。</p>
</blockquote>
<h1 id="kicad-基礎教學"><a href="#kicad-基礎教學" class="headerlink" title="KiCad 基礎教學"></a>KiCad 基礎教學</h1><p>首先要學會 KiCad 的基本用法。</p>
<h2 id="建立專案"><a href="#建立專案" class="headerlink" title="建立專案"></a>建立專案</h2><p>開啓安裝好的 KiCad。按下左上角的建立新專案按鈕。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgCJHt3BFDyYtQA_m3O7Zmh8YXfDY-UQnmJW3pqnoXJe9EMpw0B4m-n9k0UVcVkk_gbOBwepEygpyxD1TrRGWYA_gzHDKY5LFX7WBzp-UQzzQ8he_s82i-VHbcyl8JETN4kdHxjmmWbQmQhDpo3EF8VuhBY-DGD64E-Q-ZcktxTgE8sla-eSpQslZzI/s16000/kicad-new-project.jpg" alt="新增專案"></p>
<p>選擇要存放專案的位置，並輸入專案名稱。預設會自動新增與專案同名的資料夾（可以從右下取消自動新增資料夾）。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhQl-gVTMGssXj-MS6nEnDMsaqTa3L6WKrm4Af6SqXc889ZmKZHX5FXk0eF0HjAREZ2dEAPumqgNn2opUSJfTzwajZbko1Qo7W2Hqu7kcuwViHeYl2wZtXqcMUB71gM6_8ffDLLq4bKkGGGUaR1Hc5rL-Df0IrW8s_8gn3h86AKq-cBsPw1Wu1aUKCO/s16000/kicad-new-project-path.jpg" alt="選擇存放位置並輸入專案名稱"></p>
<p>建立完專案後會出現 3 個檔案：</p>
<ul>
<li><code>&lt;project_name&gt;.kicad_pro</code>：專案檔</li>
<li><code>&lt;project_name&gt;.kicad_sch</code>：Schematic 電路圖</li>
<li><code>&lt;project_name&gt;.kicad_pcb</code>：PCB 設計檔</li>
</ul>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTXl3xKteDvpQCF2l_7ZGQ8jOHqVFqeFzzZuA4ktyaSKSOU6JugiBoGXdwB_Xnft5pkqNV6K9-HQS0P8on0CMJD_58pQyH5ac2LHbRJFxq1QV5e3vEMtdmb-bSp9kKq6bQ7yBeJSxeKTL8FeqJW44dqrVIt3w8XPYIfanqteQ2mDiMnFibhNN6FVnC/s16000/kicad-project-overview.jpg" alt="建立完成後的專案"></p>
<h2 id="安裝-footprint-庫"><a href="#安裝-footprint-庫" class="headerlink" title="安裝 Footprint 庫"></a>安裝 Footprint 庫</h2><p>KiCad 內建的 Footprint 庫沒有機械鍵軸的 Footprint，因此我們要加入第三方的 Footprint 庫（或自己畫）。</p>
<p>GitHub 上有許多人畫好的機械軸 Footprint 庫，你可以選幾個喜歡的來用</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ebastler/marbastlib">ebastler&#x2F;marbastlib</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/daprice/keyswitches.pretty">daprice&#x2F;keyswitches.pretty</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ai03-2725/MX_Alps_Hybrid">ai03-2725&#x2F;MX_Alps_Hybrid</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/perigoso/keyswitch-kicad-library">perigoso&#x2F;keyswitch-kicad-library</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/keebio/Keebio-Parts.pretty">keebio&#x2F;Keebio-Parts.pretty</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/egladman/keebs.pretty">egladman&#x2F;keebs.pretty</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ziteh/key-switches.pretty">ziteh&#x2F;key-switches.pretty</a>（我畫的鍵軸庫，我自己做的鍵盤都是用這個）</li>
</ul>
<p>有些 Footprint 庫支援 KiCad 的插件管理器 Plugin and Content Manager（PCM），有些則是要手動下載並指定路徑。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/ebastler/marbastlib">ebastler&#x2F;marbastlib</a> 就支援 PCM 安裝。只要在 KiCad 主頁面（專案頁面）打開 PCM 頁面並按下「Manage」按鈕，在新跳出的「Manage Repositories」頁面中新增其網址 <code>https://raw.githubusercontent.com/ebastler/ebastler-KiCAD-repository/main/repository.json</code>，隨後就可以在 PCM 頁面上面的下拉式選單中選擇「ebastler KiCad repository」，並選擇「Libraries」標籤頁安裝「marbastlib」。點擊「Install」按鈕後要記得按「Apply Pending Changes」才會真正進行安裝。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrUe8pueoiShS4VwATcXwk7kRQXP28RwXFmD37E_3AK7zLT4OH84IMdQU_qQSFXkDxMavFTo5WfGRcgb9yIdORsA7XLTA5Yv1tvlie6wpoN-d-7mAJ3CK28OCfMGM8_oI7Xi4OkZ8KgJNoT_xNVsbobPQpjMPIJ-KkgWKXPeVlpbCMnPXGBU64FXV6/s16000/PCM.jpg" alt="安裝支援 PCM 的 Footprint 庫"></p>
<p>而我自己畫的 <a target="_blank" rel="noopener" href="https://github.com/ziteh/key-switches.pretty">ziteh&#x2F;key-switches.pretty</a> 必須要手動下載並自己新增。透過 KiCad 主頁面（專案頁面）上方工具列的「Preferences &gt; Manager Footprint Libraries」開啓 Footprint 庫管理頁面，標籤頁可以選擇全域的「Global Libraries」或專屬於專案的「Project Specific Libraries」，透過左下的資料夾圖樣按鈕選擇下載下來的 Footprint 庫資料夾位置即可。</p>
<p>對於手動增加的 Footprint 庫，如果想要以專案專屬的方式安裝（Project Specific Libraries），可以將其資料夾放到專案資料夾中，再到管理頁面新增，它應該會自動套用變數路徑，如：<code>$&#123;KIPRJMOD&#125;/my-footprint.pertty</code>。如果你預計使用 Git，也可以用 Git submodule 管理這些 Footprint 庫。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhYluZZe-b_2p8iOgo5Cvuq6Z9w5GQV1Go_TTBxwO9y4ez_eT9GSui2ylGi-4jhwtvMyAHLA93ptdq9ISJDKP5kv5ou7tzAhCi9kLwqnUvPubazJ0-BIr5BMVpJv1nFEW0oK_WyQTMPj6R_Bkmdu2--RXmp1yRMFcndTgUWh3IgLswKB3GC7APgGyDf/s16000/pertty.jpg" alt="手動新增專案專屬的 Footprint 庫"></p>
<h2 id="編輯-schematic"><a href="#編輯-schematic" class="headerlink" title="編輯 Schematic"></a>編輯 Schematic</h2><blockquote>
<p>Schematic 常見翻譯爲原理圖，雖然我自己不是很習慣這個名稱。</p>
</blockquote>
<p>在專案頁面中雙擊 <code>.kicad_sch</code> 以打開 Schematic。現在是全空的狀態。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUBSDN4vIVVSVpIrhMM6qxHf8W0Eo6oGkjVVToL8muzQ-52W9HgtxNB3gZNpBC7l0fyYakom80bhZBN3CMXU8EicBLRqh8Hhm6yOBY0zfP1-rhK2YO28cFEfCplY_WrUWlHmU3OUPG2-dOIKeY8OEwYlVPfzIRiINDpexeXgs0LZojO31MWP2njQfz/s16000/sch-empty.jpg" alt="Schematic 編輯器畫面"></p>
<h3 id="加入元件符號"><a href="#加入元件符號" class="headerlink" title="加入元件符號"></a>加入元件符號</h3><p>在右排工具列偏上處有一個「Add a symbol」按鈕（或快捷鍵 <code>A</code>），按下後會出現元件符號（symbol）選擇視窗。在上方的搜尋欄鍵入「R」，並在中間的清單中找到電阻的符號（應該位於 Deveice 底下），然後將其擺放到畫面上。按一下 <code>ESC</code> 退出擺放符號，返回選取模式。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi-y4sWQTuxyPlHzWYqsyWbX8KYka7qUZwzhK3yqhwKsHUCt-wk-fiKrDU582kkFQ6REkua0NYsYx8St6UgDlbfPIKdzCH4-aRvEbD9dtEz-w4-N4Kbbx5UFaRVs2bA7jO3dgAk5h59pYoZubnudQwsZfqoGDXmSaT-3ji6YABHwhaNzUVeP_BdTVoQ/w253-h320/sch-add-symbol.jpg" alt="使用「Add a symbol」按鈕加入元件到頁面"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhuE8OZzNE5ub-dElZ_mKzNNrnxMGIat0CfM42KKHzCHYM8DvIU-CfdDdLs0edV1Avt8L4Spjjk50NYanz8QnreZVEY-dDN35jZvzsk9qDi0qT68CJaZi4gDp7tuep6dQOqs5DuwmDlxG4TyD89cHa9Yowow_-Wm-QzjHPkqN1KkuCUTxI8bT0ena9z/s16000/sch-symbol-choose.jpg" alt="在元件符號選擇畫面搜尋並選擇所需的元件"></p>
<p>選擇元件符號可以按 <code>R</code> 旋轉。雙擊則可以進入其屬性設定頁面。</p>
<p>將滑鼠遊標移動到符號的接腳端點上會出現接線的提示，按一下後就會開始接線，過程中單擊會在該處清楚轉角，接線到另一個接腳端點、線會自動結束接線，在空白處雙擊會強制結束。若要手動新增走線，可以在右排工具列選擇，或使用快捷鍵 <code>W</code>。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXICAV-tpFs_UXIRABbyXMN31oro-62sozsOC9CmSycmgiDDJ_cvXNlhPsdmRbGEgcKO51lH_qfTvjEaD9ucFzFR1cFEEBw-ucskOWdAfT9l8VBnYF0SuPgDwbvzBg-2HzGFArSKoVtJEBN7sRssx9EvueDkdSXb3AIrHFRfDsUAxRkRfIDao8pvGd/s16000/sch-wire.jpg" alt="點擊元件接腳或使用快捷鍵 W 可以繪製接線"></p>
<p>在右側工具列加入元件符號的按鈕下面還有一個「Add a power symbol」的按鈕（快捷鍵 <code>P</code>），使用它可以加入電源符號。</p>
<h3 id="子頁面"><a href="#子頁面" class="headerlink" title="子頁面"></a>子頁面</h3><p>若電路較複雜，一頁不夠畫的話，可以使用階層式頁面（Hierarchical sheet）。</p>
<p>在右排工具列中央處有一個「Add a hierarchical sheet」按鈕（或快捷鍵 <code>S</code>），按下後可以在頁面上繪製一個方塊以代表子頁面，隨後可以設定其名稱。雙擊此方塊即可進入子頁面。你可以按快捷鍵 <code>Ctrl</code>+<code>H</code> 開啓階層式頁面導覽，以方便在各個頁面間切換。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhRFzFyr8iuNc5jVk8t_l3IoxUUFtvwnk392R4Tm758aJfYhkJTYb8SYYyjkmArA_vLHGGU16KqwTyGg_NSc3o9r5l3ixXknU_SrydgRedc5w_p2Pz_ce2esNIJ7aOiyNveInZkdPQW0SR2FOHXnoSclWdkgcYkZD_0Gvwdy6oNIHIxR2qnbQeTOBsG/s16000/sch-add-hierarchical-sheet.jpg" alt="透過「Add a hierarchical sheet」按鈕新增階層式頁面"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhWPOlxWil726eynU3e5KddoNV1NdpsrpjHfA0VDFrd6jx8Z7AvB5wj7DvDaNx4w2iuqzIs1sbB5uiCgAe6ZDdxt_HqwR9RghgmTgecGen8BMtmVV4o6ROKpCCLR_0JzOSl_w5FPUeJJizJO4i6AqHDLWRI5taAsI3x0L3-OIG4sosJ4wgFjVi-wEar/s16000/sch-hierarchical-sheet-name.jpg" alt="設定子頁面的名稱"></p>
<h3 id="標籤"><a href="#標籤" class="headerlink" title="標籤"></a>標籤</h3><p>在右排工具列中央處選擇「Add a global label」（或快捷鍵 <code>Ctrl</code>+<code>L</code>）可以新增全域標籤。這個全域標籤可以跨頁面連接走線，只要是名稱相同的標籤就會視爲連接在一起。善於全域標籤可以讓你的 Schematic 不會充滿一堆凌亂的走線。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1bGF8PQQNGApgEIkDOkeTXLrdcC8mxZ4uGNAzVplSn9fCBltVw2GxDcnRSeElgKWUshjXtNyqCGb78YHjY2Zb9f3zyEoWkidkTXwog1PnWtF_npVhgkNI7Wlm6sVfHf6DuHacSS668gpyUV24ZQHbTw6FNpcB8VDRTt3-JibDpkkF-ATN9DbpTieQ/s16000/sch-add-global%20label.jpg" alt="用「Add a global label」按鈕加入全域標籤"></p>
<p>除了全域標籤，還有一種網路標籤（Net label），透過右側工具列的「Add a net label」或快捷鍵 <code>L</code> 來新增網路標籤。網路標籤和全域標籤的功能一樣，相同名稱的標籤會連接在一起，只是網路標籤的作用域是局部的，僅在目前的單一頁面中有效，要跨頁面連接的話要用全域標籤，或使用階層式標籤（hierarchical label）。</p>
<h3 id="footprint"><a href="#footprint" class="headerlink" title="Footprint"></a>Footprint</h3><p>指定各個元件的 Footprint。元件的 Footprint 可以透過雙擊該元件開啓屬性設定頁面來調整，也可以按上方工具列的「Bulk-edit fields of all symbols in schematic」按鈕開啓「Symbol Fields Table」頁面來修改。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiFFfazVfv28XmOf69Rapnop9P6vpB3P4h7NvJfjmxXrlH_mB7QGpg2u1Qc64WCefdf1i58rtZNCvQ6ba6xZphL-Lz-VAXyJX5zUD-rdz_XKP8MTL4qKgjqrRrUPfvdvDdxgbFb1ZBS16v3eDpkn_OeolKog0XAqUTPWOkmp4URju0IvQCgl76y1ezz/s16000/sch-bom-edit.jpg" alt="「Bulk-edit fields of all symbols in schematic」按鈕"></p>
<p>點擊元件「Footprint」欄位右側的「三本書符號」以開啓 Footprint 庫瀏覽頁面。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhoCrzMXn_9_tKBotsgHycppvmi1FFeRlA_J78tqmhogQbyNk6Kx0MVdNzAVpiMEpwlm7MepJ4mhNJ3wbxuhUb9S0NS_deArZEmcpYMGCiarBWo1nOKqL8jB53mshM7_mYj8NhfSOLSHAt7kCGcL4penHgTrpa1gGVNj-DbaIQYtzCNf-UFkfl9lzgY/s16000/sch-bom-edit-footprint.jpg" alt="選擇指定元件的 Footprint 欄位"></p>
<p>Footprint 瀏覽頁面左側有兩個清單，在最左側的清單找種類，例如表面黏貼型的電容是「Capacitor_SMD」，點選後在右側的清單選擇要的 Footprint，例如常用的 0402 電容是「C_0402_1005Metric」。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjgvIHRSRcwEE2XYdea3Po6E-VpXZyKytA4y855pHioiGVmdC5AOJcm5iG6gQ6dy1JYi3HJCJM9jJtHDJcIWPraROaC_EAp0nWNqJCOVF5zyynKF0OuTk9zSeMFGD-fmFOzrPPPfWGEpNW3MDbDYHsQzYDjadGgH_DgbA8qf13TuswFQvyv9BqwaJ1b/s16000/sch-footprint-as.jpg" alt="選擇 Footprint 「C_0402_1005Metric」"></p>
<p>至於要怎麼選擇 Footprint？這個牽涉到許多因素，首先是該零件要有，例如 RT9013-33GB 的封裝就是 SOT-23-5，那當然是選用「Package_TO_SOT_SMD:SOT-23-5」。但是像電容或電阻選擇就很多了，這時可以考慮焊接方式，要手工焊接的話，除非你手很穩（或有其它工具）可以焊 0201 尺寸的元件，不然通常會選 0805、0603 或 0402 的，同時你也可以考慮購買容易度；如果你打算使用 PCBA 的話，那可以考慮工廠那邊的報價。當然，封裝也和元件的功率和耐壓等電氣規格有關，但鍵盤的電路比較不需要擔心這點。</p>
<blockquote>
<p>一般說的 0603、0402 或 0201 封裝是英制尺寸，0603 就代表其尺寸長寬爲 0.06 * 0.03 inch。但是還有公制（Metric）表示法，公制 0603 代表的是長寬 0.6 * 0.3 mm。而英制 0402 等於公制 1005；英制 0201 等於公制 0603，所以一定不要搞混了。<br>KiCad 中的「C_0402_1005Metric」前面的「0402」是指英制尺寸，後面的「1005Metric」是指公制尺寸。所以這個 Footprint 就是我們一般習慣稱呼的 0402 封裝。</p>
</blockquote>
<h3 id="更新元件代號"><a href="#更新元件代號" class="headerlink" title="更新元件代號"></a>更新元件代號</h3><p>這裡的元件代號是指「Reference designator」，即 <code>U1</code>、<code>R1</code>、<code>R10</code> 或 <code>C6</code> 這種，這些代號是方便人員在焊接時知道這是什麼零件，其名稱其實沒有很強制的規定。這一步通常最後再做。</p>
<p>在上方工具列的「Fill in schematic symbol reference designators」按鈕，開啓「Annotate Schematic」頁面。你可以先用左下角的「Clear Annotation」清除目前的代號，再用右下角的「Annotate」自動更新代號。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9ox8uie8cK99P7-Bh4J-L3JAF1tjoX4h27ZM9vs64lVEkFYQ7BfkWR7eJEd1-JX2q4aons3v14yiU3O2gRpCYA9YLLxrQEEqLC25dnE8nYALdbjwNF6sq43djmQxvrKfIdrscjdU_4w2SW0Q60s3xSycRbWzdw3W-6-qhXMeJb-in21-K2nuoQzTP/s16000/sch-ref-1.jpg" alt="「Fill in schematic symbol reference designators」按鈕"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2D3I_ShbIWDJxDQEVcnQdX8QPBovSH4F5FfOHxl_wN2d-sm9IjEw9r5kmD1P0Sk8F7hTjJeSvcHyCAgU-dRQ525kuws6IZi_hgU8LJ2rCkeV1ahqmbdinO_WS87FHjJdncZEuucT3_3V_ZjXeXC-4Mg1Fi6eWGYyv1kags31J1B306eLMW4zoh7pf/s16000/sch-ref-2.jpg" alt="「Annotate Schematic」頁面"></p>
<h3 id="零件型號"><a href="#零件型號" class="headerlink" title="零件型號"></a>零件型號</h3><p>如果你要使用 JLCPCB 的 PCBA（PCB 組裝。除了生產 PCB 外，一併把零件焊接完成）服務的話，可以在「Symbol Fields Table」（上方工具列的「Bulk-edit fields of all symbols in schematic」按鈕）中新增欄位「LCSC」，並在內填入 JLCPCB 的零件編號，例如 RP2040 是 C2040、W25Q128JVS 是 C97521。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjAa35I5IbRaoNKn_kVqRN5cdSyDXW1fOY-Llr_JWbS8qoP4_JXBA2XCx_juLtAQKCJqHXOI3xCVekfj4s0iMw6V-qwaRTEKlNob1teo50B_fOST1FZ-LF3VVqU855RnTAmAis9LG-ple6c-yPfwXN4N-YNN3a-MqJVfDLvo59bLJRewfYiTVUeDxzf/s16000/sch-lcsc.jpg" alt="增加「LCSC」欄位並填入各零件的編號"></p>
<h3 id="頁面資訊"><a href="#頁面資訊" class="headerlink" title="頁面資訊"></a>頁面資訊</h3><p>Schematic 頁面右下角有一些資訊可以填寫。</p>
<p>要修改這些資訊的話，可以到上方工具列「File &gt; Page Settings」中設定。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQHk-tCHUI6E6gXu6u-VKa2m73Hhxq5VxTAe1ewnlxTPhDSUmSp7vA4eJfMjOWgCRYWsH1JEh9_NkIayxTYUaeRYDF0ounPrMbxwjBKLtPxCumCbl-ybjw-h9CVOoKR605GbaC82WvKPapV2AO9hAbMaDvcRY-rfBGMzhtUpUGIKdhaXdFv1bM180M/s16000/page-settings.jpg" alt="修改 Schemaric 頁面資訊"></p>
<h1 id="開始繪製鍵盤"><a href="#開始繪製鍵盤" class="headerlink" title="開始繪製鍵盤"></a>開始繪製鍵盤</h1><p>開始正式繪製鍵盤的 Schematic。首先要完成各個部分的元件接線。</p>
<h2 id="使用開發板"><a href="#使用開發板" class="headerlink" title="使用開發板"></a>使用開發板</h2><p>如果你覺得要自己畫<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E7%B9%AA%E8%A3%BD%E5%BE%AE%E6%8E%A7%E5%88%B6%E5%99%A8%E9%9B%BB%E8%B7%AF">微控制器</a>、<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E7%B9%AA%E8%A3%BD%E9%9B%BB%E6%BA%90%E9%9B%BB%E8%B7%AF">電源</a>和 <a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E7%B9%AA%E8%A3%BD-usb">USB</a> 的電路太麻煩的話，你可以使用現成的開發板，使用排針或排插連接開發板，這樣就只需要畫<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E7%B9%AA%E8%A3%BD%E7%9F%A9%E9%99%A3%E6%8E%83%E6%8F%8F%E9%9B%BB%E8%B7%AF">鍵矩陣掃描電路</a>。以下以 Pro Micro 爲例。</p>
<p>加入兩個「Conn_01x12」元件來代表排針&#x2F;插，雙擊它進入屬性頁面，將它的「Footprint」改成「Connector_PinHeader_2.54mm:PinHeader_1x12_P2.54mm_Vertical」。</p>
<p>加入電源符號與標籤，並根據 Pro Micro 的腳位接到正確的位置。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjfmopmM-RL6jfbbgw69xQqYMHaqXemSIyNDt9fsk5BRSbz6Bo844xybKd_1XBD4oQxDIxosfo7WewDHWx_50HpoWvnpmDKwkn_m3-0QYeXahDOHiVpsYgD_kGDXFjVHyp5k31uDT60IQr9hnZbXw-TmgNOZ4U6-Ceno6yzMqmdLpemVzEq7KWqOu5F/s16000/promicro-pinout.jpg" alt="使用 Pro Micro"></p>
<blockquote>
<p>上圖的接腳標籤名是根據 ATmega32U4 原本的腳位名，不是板上標記的 Arduino 腳位名。</p>
</blockquote>
<h2 id="繪製矩陣掃描電路"><a href="#繪製矩陣掃描電路" class="headerlink" title="繪製矩陣掃描電路"></a>繪製矩陣掃描電路</h2><p>鍵盤矩陣掃描電路是由數個開關（鍵軸）及二極體組成的。</p>
<p>爲了保持整潔，我喜歡將其放在一個獨立的子頁面中。先新增一個階層式子頁面，並命名爲「key-matrix」（Sheetname 與 Sheetfile 的名稱都要改）。雙擊方塊進入子頁面。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiOa15_1bCowe-jw0sThBPhy1HKScNgCSbzM3Pxdl9vqlK10vSq9YBykJv--pfhGIpbawNpbnGhVBqjv8qwNtpzC2SaoPjerYeD-jfdd7RDjZ42Pz4lN4vLNBNFihTzb15NSlloZRyQGdfuGW89w_J_8gepngKL9WbOiNxVQ5fHtBLUPrp2yk5_4Q2K/s16000/sch-new-key-matirx-subsheet.jpg" alt="新增「key-matrix」子頁面"></p>
<p>加入開關與二極體的元件符號「SW_Push」和「1N4148W」。當然二極體的型號很多，不一定要用 1N4148，但這是最常見的選擇（其後綴 <em>W</em> 代表 SOD-123 封裝）。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg8v9h0Om1GTdYqD9sTwAUerfyor_2Qjmf186kaPqZlJgYdq5flloVI7VJSfuZpWoyEGwZ4oaDOXTN7BgVjdn8g3JbwDuTXf431wx51nQZjp21dY9Ng0PGOXRpAxFWYfSK5xd3W8EqPYB3MSXD6wginD8KYC9cKo0qzYX0lSrmWlH1Qij6ZvaAAdYMu/s16000/sch-add-symbol-sw.jpg" alt="加入「SW_Push」元件到頁面"></p>
<p>個人會喜歡將此處代表鍵軸的元件代號改成「KEY」，雙擊開關的符號，將 Reference 的開頭由「SW」改成「KEY」。這一步有助於後續的自動擺放工具。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_asgQ8nY5OPGCRKeyPjCosZ7TD-j20AkAmPebXzqSrJSs2yWGiltSe5EJEeUaj_GDJwoC0PaPeDdaGIvhWy69ndGpsWu8Mpj2b4kuTVvATgXPlEeQqBMzNAp_OSzGawbuOSwXxTP3b3D6LvAJTisidbvK-ff7mUjEa-fxxix4vX8lHyI6YuhgSegU/s16000/sch-key.jpg" alt="將開關的代號「SW」改成「KEY」"></p>
<p>另外，也可以在這一步選擇鍵軸的 Footprint。滑鼠移到「Footprint」的「Value」欄位右側，會出現三本書的圖案，點擊後可以<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#footprint">修改 Footprint</a>。</p>
<p>鍵軸的 Footprint 決定了最後這把鍵盤<strong>可以使用什麼樣的機械軸</strong>，Cherry MX、Alps、Kailh Choc 等各種機械軸的 Footprint 都不同，要選擇正確的 Footprint 才行。而如果要鍵盤可以熱插拔的話，也就必須選用有支援熱插拔座的 Footprint（不同軸體的熱插拔座也不同）。當然也有些 Footprint 同時整合並兼容了多種不同的軸體。請自行確認你所<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E5%AE%89%E8%A3%9D-footprint-%E5%BA%AB">安裝的鍵軸 Footprint 庫</a>有哪些種類可以用。</p>
<p>以<a target="_blank" rel="noopener" href="https://github.com/ziteh/key-switches.pretty">我自己的 Footprint 庫</a>爲例：<code>MX_switch_THT_hotswap_A</code> 是同時兼容 Cherry MX 軸體熱插拔與直接焊接的 Footprint；而 <code>MX_switch_PTH_hotswap_A</code> 只有 Cherry MX 熱插拔座的焊盤，沒有直接焊接的 PTH 焊盤；<code>MX_switch_hotswap_double_sided_A</code> 是雙面都有 Cherry MX 軸的熱插拔焊盤；<code>Kailh_Choc_PG1350_THT_A</code> 則是 Kailh Choc 矮軸直接焊接用的 Footprint。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_ueLaVTGPaUM-MKQO7hDPP1pHJGXQ1mhv5XlmA8MBuWomK9TiAegrZqPXoeXnTjUgN20u7JVl8py9jgnJKyMlDxrFR_eTemduMBZesMK7hPURS9nQKfvcTRcDkWgFTBBHTaFHN5u1CYJ4etpJNOOSU_ue9EjbvftfKFGVRwPNf1vZypMso1tCJkbZ/s16000/Screenshot%202023-05-08%20at%2023-49-58%20ziteh_key-switches.pretty%20Mechanical%20keyboard%20switches%20KiCad%20footprint%20library.png" alt="我自己的 Footprint 庫中有多種不同的 Footprint"></p>
<p>先將開關與二極體這樣擺放，一端相連接（注意方向，二極體有方向性），再根據你的鍵盤按鍵數量複製它們。然後將其接成鍵矩陣的樣子。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi1nX3B16ELDFBNmCfU-nhakYzWRgHuNfjPL47O7jNpxfDgYQF35S6H06sZuaJFUb9qnvt344otZXIK0knjz3bsPPm95YVzR5V6GHvffNSCfedHokXP7vbNDVxXEfW9wga7cv3dJoNf1VePxWZNjEPn0A88UDzcYvbXiaiE7JVglxpcJJX25v3KM7aW/s16000/sch-sw-diode-pair.jpg" alt="先將一組開關與二極體擺好，再複製需要的數量"></p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjvak73OBN9QiLxWjWHknS3o454zC9i_1FPCQrOqcD3flJPXkT7NPfViKjgasolo7vkPGOR_V0s0CvLTYUN8X3I1jTOvlbOpc3e_eCqS7Pvu4n1Apiy9gltgQdkvCs0GPtemJ_JOPAl2UDpB4j-5D2fKnmlAjn81bCQr8-rgJ_-exg3FPjl74P8KPui/s16000/sch-key-matrix-1.jpg" alt="接成鍵矩陣掃描電路"></p>
<blockquote>
<p>請注意走線的交叉處，若交叉點上有一個圓點，則代表交叉的兩條線有連接；無圓點的話就代表這兩線沒有實際連接，是跨越。要手動使交叉點連接的話可以用快捷鍵 <code>J</code>。</p>
</blockquote>
<p>爲鍵矩陣電路的各個 Row 和 Column 新增各自的全域標籤。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj0yIr0fJaCqQXdnN5sLqaSHp7yrnsp2DpACNsbB5bWvw2yxGaoMwlI6pRKm-cN7Mi8dhO8CpSACS8315D6F3MHnIu-J_CF43cYgwdxGqdbBCp3S2WrZlarglVmYfdvCHDF9_tZ2EUCrU6syHDYVIsZRnsNIZadke1yowF-ptN_-qcTI1WASjwTn4mf/s16000/Inkedsch-key-matrix-2A.jpg" alt="加上全域標籤"></p>
<h2 id="繪製電源電路"><a href="#繪製電源電路" class="headerlink" title="繪製電源電路"></a>繪製電源電路</h2><p>電源電路主要是提供穩定的電源給微控制器。現在的微控制通常使用 3.3V 或 5.0V 的電壓，而 USB 的電源電壓是 5.0V，若需要將 USB 的 5.0V 變成 3.3V 的話，就需要降壓電路。降壓電路通常有分 DC-DC（Buck converter）和 LDO（Low-dropout regulator）兩種，一般來說 DC-DC 的功率較大、效率較高，但週邊電路較複雜，因爲鍵盤其實不太耗電，所以比較沒必要使用 DC-DC 電路，大家通常都會選擇用 LDO。</p>
<p>LDO 的型號有非常多種，其規格可能都不太一樣，且還有分可調輸出或固定輸出型。若是需要 固定輸出 3.3V 的話，我常使用的 LDO 型號爲：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.digikey.tw/zh/products/detail/richtek-usa-inc/RT9013-33GB/2546347">RT9013-33GB</a>：500mA，SOT-23-5（個人最常用）</li>
<li><a target="_blank" rel="noopener" href="https://www.digikey.tw/zh/products/detail/torex-semiconductor-ltd/XC6220B331MR-G/2138177?s=N4IgTCBcDaIBoGEBsYwAYBCBmLBGAsgEoC0A4iALoC+QA">XC6220B331MR-G</a>：1A，SOT-23-5</li>
<li><a target="_blank" rel="noopener" href="https://www.digikey.tw/zh/products/detail/umw/AMS1117-3-3/17635254">AMS1117-3.3</a>：1A，SOT-223</li>
</ul>
<p>我自己最常用的是 RET9013-33GB，但是 KiCad 原始的元件庫內沒有它，這時你可以選擇找第三方元件庫或自己畫（<a target="_blank" rel="noopener" href="https://www.studiopieters.nl/kicad-create-a-new-symbol/">參考教學</a>），但最簡單的方式是找可替代的元件。XC6220B331MR 的接腳與 RT9013-33GB 相同，所以我們用它來代替 RT9013-33GB。</p>
<p>在主頁面加入 XC6220B331MR，雙擊它進入屬性頁面，將「Value」的值改成「RT9013-33GB」。</p>
<p>加入兩個無極性電容「C」，雙擊它們開啓屬性頁面，將「Value」改成「1uF」，並將其分別接到 RT9013-33GB 的「VIN」與「VOUT」腳。RT9013-33GB 的「CE（或 EN）」腳直接接到「VIN」。</p>
<p>增加「GND」、「+5V」與「+3V3」這三種電源符號。「+5V」接「VIN」、「+3V3」接「VOUT」、「GND」接兩個電容的另一腳與 RT9013-33GB 的「GND」。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibQMCqA8P9g-6L1yjVyQjpXe17q4b24mt09T21KwoxkGSQSI7jKxeyYdoGEoWXH4qBQM8wPXwxkRkRGPJkLveWiLUpl0UmHyPUaSRajFD6gtsop1XMS-_pT3hjKReJwf0Fjd7ckvRZYgcy_gcY2G0gGoqrzwMz-Uayo9DhfdA7I5NuE4n5HJu9hY6D/s16000/sch-ldo.jpg" alt="RT9013-33GB 電路"></p>
<p>這樣就完成電源電路了。每種電源 IC 所需的外圍電路不同，若要使用其它型號的 IC，請記得去查看它的 Datasheet，一般都會提供參考應用電路。</p>
<h2 id="繪製-usb"><a href="#繪製-usb" class="headerlink" title="繪製 USB"></a>繪製 USB</h2><p>加入元件「USB_C_Receptacle_USB2.0」，這是 USB Type-C（僅 USB 2.0）的符號。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhJM_J0Z0Kzsyjg__YCZnkPv66rpjZSp1xVemqBQuni34aV1FKMAwq76eRCPQHAXyvfAJsbCutUEKIlbkFdIia1X0skNpbhhrHmrtr1SaZY0b0rE3ZOMhFupSVX5_H0RuqPdZJb5hVRNcN6D6R3U56wWoewXB5-cv_-ebZP6NwypcC4p5eArjQymb7j/s16000/sch-symbol-usb-c.jpg" alt="選擇 USB 元件符號並加入到頁面"></p>
<p>USB Type-C 需要加入 CC 電阻。加入兩個電阻「R」，在屬性頁面將「Value」改成「5.1k」，並分別接到「CC1」與「CC2」腳，另一端接地（GND）。</p>
<p>「VBUS」是 USB 的電源腳，USB 標準電源是 5.0V，可以直接接給 LDO 用，但一般安全起見會加個自恢復保險絲。加入元件符號「Polyfuse」，並將其「Value」改成「500mA, 6V」。將其一端接「VBUS」一端接「+5V」。</p>
<p>USB 差分訊號「D+」與「D-」各 2 腳，將相同的接在一起，然後加入全域標籤「USB_D+」與「USB_D-」。</p>
<p>「GND」和「SHIELD」接地。在一些情況下，「SHIELD」和地之間可能會接一些濾波電路，但是對鍵盤來說直接接地就可以了。</p>
<p>「SBU1」和「SBU2」這裡用不到，可以爲其加上無連接的旗標（右側工具列的「Add a no-connection flag」或快捷鍵 <code>Q</code>）。</p>
<blockquote>
<p>如果可以的話，可以爲 USB 加入 ESD 靜電保護的元件。</p>
</blockquote>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiHLtaF4GyRFYABUeV7Lrp9TkK2KQ2B8J3pV37GB6KVS9P74TzhlSNQOyP9wdEpzRpbUEgTvRHzgtReCEMpbqDn55Bm1CaTV-k5ct0UMZ4-IXIRYx844f9vdGVoJXqCoFvfkBJpR8H15A8_nhQ3yp_-05xi2nIT2C87HwLXlEZ3t5uk2ewUfbhbE01Y/s16000/sch-usb.jpg" alt="USB Type-C 電路"></p>
<h2 id="繪製微控制器電路"><a href="#繪製微控制器電路" class="headerlink" title="繪製微控制器電路"></a>繪製微控制器電路</h2><p>微控制器電路是最複雜的部分，且每種微控制器都不同。想要知道一個微控制需要哪些週邊元件的話，最好的方式就算找現成的電路參考，ATmega32U4 可以參考 <a target="_blank" rel="noopener" href="https://cdn.sparkfun.com/datasheets/Dev/Arduino/Boards/Pro_Micro_v13b.pdf">Pro Micro 的電路</a>；RP2040 可以參考官方的<a target="_blank" rel="noopener" href="https://www.raspberrypi.com/documentation/microcontrollers/rp2040.html#design-files">範例電路</a>。爲了方便起見，我也爲微控制器電路新增一個名爲「mcu」的子頁面。</p>
<p>我這裡以較複雜的 RP2040 爲例。RP2040 所需的外圍元件有：</p>
<ul>
<li>石英振盪器。可以使用元件「Crystal_GND24」，將數值改成「12MHz」。</li>
<li>外接 QSPI Flash。這裡使用 16MB 的 「W25Q128JVS」。Flash 也有自己的週邊電路元件。</li>
<li>USB 終端串聯電阻，阻值 27Ω。</li>
<li>8 顆接到 3.3V 的去藕電容，其中一顆是「1uF」，其它是「100nF」。</li>
<li>3 顆接到 1.1V 的去藕電容，其中一顆是「1uF」，其它是「100nF」。</li>
<li>兩個開關，RESET 開關有上拉電阻。</li>
</ul>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjTWnrMxbb3OhXV3AmrvfdE6-ATnIpOahS6IA4Z6Qc0obPg0IWltLi7x_7CmnjWuVApdjapocij70tICZA9XR8pk8lsgaAqdA_Kj6EpTCYZEKGpu3zM46eY1nTVaUG3AHOpYQ9OZT7KWT9SA8D_M5is_flhY8YkcXulJhPMTt7KooCjqBn13S3cQTj_/s16000/test-keyboard-mcu-1.jpg" alt="RP2040 週邊電路示範"></p>
<p>這裡我使用網路標籤（Net label）來完成週邊電路的接線。</p>
<p>另外使用全域標籤將鍵矩陣接上正確的 GPIO 腳，這裡要與 QMK 韌體內的腳位設定一致。微控制器上其它沒用到的接腳可以加上無連接旗標（右側工具列的「Add a no-connection flag」或快捷鍵 <code>Q</code>）。</p>
<h2 id="其它元件"><a href="#其它元件" class="headerlink" title="其它元件"></a>其它元件</h2><p>鍵盤會需要螺絲孔，這個也要加入 Schematic 中。在元件符號庫中找到「MountingHole」或「MountingHole_Pad」，前者是無焊盤的絕緣螺絲孔，後者有焊盤，可以做接地屏蔽等用途。要幾個螺絲孔加複製幾個。</p>
<p>建議至少爲電源「+3V3」與「GND」加上測試焊盤，未來焊接前的短路檢查會比較方便。使用元件符號「TestPoint」，並將其接到要加上測試焊盤的接線上。</p>
<p><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg3XzabwSjq-KAEzUmmSC4x53fjTbuW_VyYEszuvdTVic2TeX3xfCLH5XgMYSbFyLQu1AOwF4lFXwNtlRldWg47vdwGMbD8JjdEifWwZPgKejKLIHad_opy-VxdkLk7cO6C2Ik2hcsPfCVlxgjShO_ABkc-o9qw1PFP_BpT8Y4AuDAsTFo9Ha5RlZYK/s16000/sch-testpotin.jpg" alt="測試焊盤"></p>
<p>如果你要加入 LED 的話，LED 預設的 Reference 是「D」，爲了後續自動擺放方便，我喜歡將其改成「LD」（例如「LD1」），將 LED 和鍵矩陣電路的二極體作區隔。</p>
<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p>當所有部分的元件符號及接線都完成後，編輯並再次檢查各個元件的 <a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E6%9B%B4%E6%96%B0%E5%85%83%E4%BB%B6%E4%BB%A3%E8%99%9F">Footprint</a>，然後<a href="/posts/diyqmkkeyboard-pcb-layout-sch/#%E6%9B%B4%E6%96%B0%E5%85%83%E4%BB%B6%E4%BB%A3%E8%99%9F">更新一下代號</a>，Schematic 就算完成了。</p>
<p>接下來請繼續查看<a href="/posts/diyqmkkeyboard-pcb-layout-layers/">下一篇</a>以完成 PCB Layou 的部分。</p>
<blockquote>
<p>如果你想參考完整的檔案的話，可以到 GitHub 上找一些別人的 repo，例如我的 <a target="_blank" rel="noopener" href="https://github.com/ziteh/calcite">Calcite52</a>。<br>你或許可以用 <a target="_blank" rel="noopener" href="https://kicanvas.org/">KiCanvas</a> 來線上查看 KiCad 的 Schematic 檔案，例如<a target="_blank" rel="noopener" href="https://kicanvas.org/?github=https://github.com/ziteh/calcite/tree/main/Calcite52">這樣</a>。我的另一篇文章有介紹：<a href="/posts/kicanvas-intro/">KiCanvas——線上預覽KiCAD電路圖</a></p>
</blockquote>
<h1 id="git"><a href="#git" class="headerlink" title="Git"></a>Git</h1><p>如果你想爲 KiCad 用 Git 的話，可以參考以下的 <code>.gitignore</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">## KiCad EDA .gitignore ##</span><br><span class="line"></span><br><span class="line"># Temporary files</span><br><span class="line">*.000</span><br><span class="line">*.bak</span><br><span class="line">*.bck</span><br><span class="line">*.kicad_pcb-bak</span><br><span class="line">*.sch-bak</span><br><span class="line">*.kicad_sch-bak</span><br><span class="line">*~</span><br><span class="line">_autosave-*</span><br><span class="line">\#auto_saved_files\#</span><br><span class="line">*.tmp</span><br><span class="line">*-save.pro</span><br><span class="line">*-save.kicad_pcb</span><br><span class="line">fp-info-cache</span><br><span class="line"></span><br><span class="line"># Netlist files (exported from Eeschema)</span><br><span class="line">*.net</span><br><span class="line"></span><br><span class="line"># Autorouter files (exported from Pcbnew)</span><br><span class="line">*.dsn</span><br><span class="line">*.ses</span><br><span class="line"></span><br><span class="line"># Exported BOM files</span><br><span class="line">*.xml</span><br><span class="line">*.csv</span><br><span class="line"></span><br><span class="line"># Exported Gerber</span><br><span class="line">[Gg]erber/</span><br><span class="line">*.g[tb][lops]</span><br><span class="line">*.gbr</span><br><span class="line">*.gm1</span><br><span class="line">*.drl</span><br><span class="line"></span><br><span class="line"># Backup</span><br><span class="line">*-backups/</span><br><span class="line"></span><br><span class="line"># Exported JLCPCB tools plugin</span><br><span class="line">jlcpcb/</span><br><span class="line"></span><br><span class="line"># zykrah/kicad-kle-placer plugin</span><br><span class="line">keyautoplace.log</span><br></pre></td></tr></table></figure>


<h1 id="相關網頁"><a href="#相關網頁" class="headerlink" title="相關網頁"></a>相關網頁</h1><ul>
<li><a href="/posts/diyqmkkeyboard-0/#%E6%95%99%E5%AD%B8%E6%96%87%E5%88%97%E8%A1%A8">本 QMK 教學系列文列表</a></li>
<li><a target="_blank" rel="noopener" href="https://kb.xyz.is/">Keyboard PCB Builder</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.kicad.org/7.0/zh/getting_started_in_kicad/getting_started_in_kicad.html">KiCad 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://www.studiopieters.nl/kicad-create-a-new-symbol/">KiCAD – Create a new Symbol</a></li>
<li>QMK相關<ul>
<li><a target="_blank" rel="noopener" href="https://qmk.fm/">QMK 官方網站</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.qmk.fm/#/">QMK 官方文件</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/qmk/qmk_firmware">QMK 的 GitHub</a></li>
</ul>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/kicanvas-intro/" rel="prev" title="KiCanvas——線上預覽KiCAD電路圖">
                  <i class="fa fa-angle-left"></i> KiCanvas——線上預覽KiCAD電路圖
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/diyqmkkeyboard-vial/" rel="next" title="[自製QMK鍵盤-番外] QMK啓用Vial教學">
                  [自製QMK鍵盤-番外] QMK啓用Vial教學 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







  <p style="text-align: center;color: #a3a3a3;font-size: 14px;margin-top: 60px;">留言可能不會立即顯示。若過了幾天仍未出現，請 <a href="mailto:honmonoh@gmail.com">Email</a> 聯繫：）</p>
    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" title="本網站所有內容除特別聲明外，均採用創用CC 姓名標示-非商業性-禁止改作授權。
    分享時請註明作者及出處。" style="border-bottom: 0;">
      <img src="https://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png" style="display: unset;">
    </a>
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZiTe</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"zite-honmonoh","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
